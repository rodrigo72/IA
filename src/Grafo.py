import heapq
from math import sqrt
from collections import deque


class Grafo:

    def __init__(self):
        self.nodos = {}

    def get_nodes(self):
        return self.nodos

    def inicializa_grafo(self):
        self.nodos["0-0"] = ["50-0", "0-200"]
        self.nodos["50-0"] = ["0-0", "50-50", "100-0"]
        self.nodos["100-0"] = ["50-0", "100-50", "150-0"]
        self.nodos["150-0"] = ["100-0", "150-50", "200-0"]
        self.nodos["200-0"] = ["150-0", "200-100", "250-0"]
        self.nodos["250-0"] = ["200-0", "250-75", "325-0"]
        self.nodos["325-0"] = ["250-0", "250-75", "362.5-37.5", "400-0"]
        self.nodos["400-0"] = ["325-0", "362.5-37.5", "450-0", "450-50", "400-100"]
        self.nodos["450-0"] = ["400-0", "450-50", "500-0"]
        self.nodos["500-0"] = ["450-0", "500-50", "550-0"]
        self.nodos["550-0"] = ["500-0", "550-50", "600-0"]
        self.nodos["600-0"] = ["550-0", "600-50", "700-0"]
        self.nodos["700-0"] = ["600-0", "700-50", "800-0"]
        self.nodos["800-0"] = ["700-0", "800-50"]
        self.nodos["362.5-37.5"] = ["325-0", "400-0", "325-75"]
        self.nodos["50-50"] = ["50-0", "50-100", "50-150", "100-50"]
        self.nodos["100-50"] = ["50-50", "100-0", "150-50", "100-100"]
        self.nodos["150-50"] = ["100-50", "150-0", "150-100"]
        self.nodos["450-50"] = ["450-0", "400-0", "500-100"]
        self.nodos["500-50"] = ["500-0", "550-50", "500-100"]
        self.nodos["550-50"] = ["500-50", "550-0", "600-50", "550-100"]
        self.nodos["600-50"] = ["550-50", "600-0", "700-50", "600-100"]
        self.nodos["700-50"] = ["600-50", "800-50", "700-0", "700-100"]
        self.nodos["800-50"] = ["800-0", "700-50", "750-100", "800-100"]
        self.nodos["250-75"] = ["250-0", "325-0", "250-150", "325-75"]
        self.nodos["325-75"] = ["250-75", "362.5-37.5", "250-150", "400-150"]
        self.nodos["50-100"] = ["50-50", "100-100", "50-150"]
        self.nodos["100-100"] = ["100-50", "50-100", "150-100"]
        self.nodos["150-100"] = ["100-100", "100-150", "150-50", "200-100"]
        self.nodos["200-100"] = ["150-100", "200-0", "200-150"]
        self.nodos["400-100"] = ["400-0", "450-100", "400-150"]
        self.nodos["450-100"] = ["400-100", "500-100", "450-150"]
        self.nodos["500-100"] = ["450-100", "550-100", "500-50", "450-50"]
        self.nodos["550-100"] = ["500-100", "550-50", "550-150"]
        self.nodos["600-100"] = ["600-50", "600-200", "700-100"]
        self.nodos["700-100"] = ["600-100", "700-50", "700-150", "750-100"]
        self.nodos["750-100"] = ["800-100", "800-50", "800-150", "700-100"]
        self.nodos["800-100"] = ["750-100", "800-50", "800-150"]
        self.nodos["50-150"] = ["50-50", "50-100", "100-150"]
        self.nodos["100-150"] = ["50-150", "200-150", "100-200", "150-100"]
        self.nodos["200-150"] = ["100-150", "200-100", "200-200", "250-150"]
        self.nodos["250-150"] = ["200-150", "250-75", "325-75", "350-150", "250-200"]
        self.nodos["350-150"] = ["250-150", "400-150", "350-200"]
        self.nodos["400-150"] = ["350-150", "400-100", "400-200", "325-75"]
        self.nodos["450-150"] = ["450-100", "450-200", "550-150"]
        self.nodos["550-150"] = ["450-150", "550-100", "550-200"]
        self.nodos["650-150"] = ["700-150", "650-200"]
        self.nodos["700-150"] = ["650-150", "750-150", "700-100", "700-200"]
        self.nodos["750-150"] = ["700-150", "750-200"]
        self.nodos["800-150"] = ["750-100", "800-100", "800-200"]
        self.nodos["0-200"] = ["0-0", "50-200", "0-300"]
        self.nodos["50-200"] = ["0-200", "50-300", "100-200"]
        self.nodos["100-200"] = ["50-200", "100-150", "100-300", "200-200"]
        self.nodos["200-200"] = ["100-200", "200-150", "250-200", "200-300"]
        self.nodos["250-200"] = ["200-200", "250-150", "300-200", "250-300"]
        self.nodos["300-200"] = ["250-200", "300-250", "350-200"]
        self.nodos["350-200"] = ["300-200", "350-150", "400-200"]
        self.nodos["400-200"] = ["350-200", "400-150", "450-200", "400-250"]
        self.nodos["450-200"] = ["400-200", "550-200", "450-150", "450-250"]
        self.nodos["550-200"] = ["450-200", "550-150", "550-250", "600-200"]
        self.nodos["600-200"] = ["550-200", "600-100", "650-200", "600-250"]
        self.nodos["650-200"] = ["600-200", "700-200", "650-150"]
        self.nodos["700-200"] = ["650-200", "750-200", "700-150", "700-250"]
        self.nodos["750-200"] = ["700-200", "800-200", "750-150"]
        self.nodos["800-200"] = ["750-200", "800-150", "800-250"]
        self.nodos["150-250"] = ["200-250", "150-300"]
        self.nodos["200-250"] = ["150-250", "200-200", "200-300"]
        self.nodos["300-250"] = ["300-200", "350-250", "300-300"]
        self.nodos["350-250"] = ["300-250", "350-300", "400-250"]
        self.nodos["400-250"] = ["350-250", "400-200", "450-250", "400-300"]
        self.nodos["450-250"] = ["400-250", "450-200", "500-250", "450-300"]
        self.nodos["500-250"] = ["450-250", "550-250", "500-300"]
        self.nodos["550-250"] = ["550-200", "500-250", "600-250", "550-300"]
        self.nodos["600-250"] = ["550-250", "600-200", "650-300", "600-350"]
        self.nodos["650-250"] = ["700-250", "650-300"]
        self.nodos["700-250"] = ["650-250", "750-250", "700-200"]
        self.nodos["750-250"] = ["700-250", "750-300"]
        self.nodos["800-250"] = ["800-200", "750-300", "800-350"]
        self.nodos["0-300"] = ["50-300", "0-200", "0-400"]
        self.nodos["50-300"] = ["0-300", "50-200", "50-350"]
        self.nodos["100-300"] = ["100-200", "50-350", "150-300"]
        self.nodos["150-300"] = ["100-300", "150-250", "200-300", "150-350"]
        self.nodos["200-300"] = ["150-300", "200-250", "200-400", "250-300"]
        self.nodos["250-300"] = ["200-300", "250-200", "250-400", "300-300"]
        self.nodos["300-300"] = ["250-300", "300-200", "300-400", "350-300"]
        self.nodos["350-300"] = ["300-300", "350-250", "300-350", "400-350", "400-300"]
        self.nodos["400-300"] = ["350-300", "400-250", "400-350"]
        self.nodos["450-300"] = ["450-250", "450-350", "500-300"]
        self.nodos["500-300"] = ["450-300", "500-250", "550-300", "500-350"]
        self.nodos["550-300"] = ["500-300", "550-250", "550-350"]
        self.nodos["650-300"] = ["600-250", "600-350", "750-300", "650-250", "650-350"]
        self.nodos["750-300"] = ["650-300", "750-250", "750-350", "800-250", "800-350"]
        self.nodos["50-350"] = ["50-300", "100-300", "50-400", "150-350"]
        self.nodos["150-350"] = ["50-350", "150-300", "150-400", ]
        self.nodos["300-350"] = ["300-300", "300-400", "350-300"]
        self.nodos["400-350"] = ["350-300", "400-400", "450-350", "400-300"]
        self.nodos["450-350"] = ["400-350", "450-400", "450-250", "500-350"]
        self.nodos["500-350"] = ["450-350", "500-300", "550-350"]
        self.nodos["550-350"] = ["500-350", "550-400", "550-300", "600-350"]
        self.nodos["600-350"] = ["550-350", "600-400", "600-250", "650-300"]
        self.nodos["650-350"] = ["650-300", "700-350"]
        self.nodos["700-350"] = ["650-350", "700-400", "750-350"]
        self.nodos["750-350"] = ["700-350", "750-300"]
        self.nodos["800-350"] = ["750-300", "800-250", "800-400"]
        self.nodos["0-400"] = ["0-300", "50-400", "0-600"]
        self.nodos["50-400"] = ["0-400", "50-350", "150-400", "50-450"]
        self.nodos["150-400"] = ["50-400", "150-350", "150-450", "50-450", "200-400"]
        self.nodos["200-400"] = ["150-400", "200-300", "250-400", "200-500"]
        self.nodos["250-400"] = ["200-400", "250-300", "300-400"]
        self.nodos["300-400"] = ["250-400", "300-300", "350-400", "300-500"]
        self.nodos["350-400"] = ["300-400", "350-300", "400-400"]
        self.nodos["400-400"] = ["350-400", "400-350", "450-400", "400-450", "300-500"]
        self.nodos["450-400"] = ["450-350", "400-400", "450-450", "500-400"]
        self.nodos["500-400"] = ["450-400", "500-450", "550-400"]
        self.nodos["550-400"] = ["500-400", "600-400", "550-350"]
        self.nodos["600-400"] = ["550-400", "550-450", "600-350", "700-400", "600-450"]
        self.nodos["700-400"] = ["600-400", "700-350", "800-400", "700-450"]
        self.nodos["800-400"] = ["700-400", "800-350", "800-450"]
        self.nodos["50-450"] = ["50-400", "150-400", "100-450", "50-500"]
        self.nodos["100-450"] = ["50-450", "150-450", "100-500"]
        self.nodos["150-450"] = ["100-450", "150-400", "200-500"]
        self.nodos["400-450"] = ["400-400", "450-450", "400-500"]
        self.nodos["450-450"] = ["400-450", "450-400", "500-450", "450-500"]
        self.nodos["500-450"] = ["450-450", "450-500", "500-400", "500-500"]
        self.nodos["550-450"] = ["600-400", "500-500", "550-500"]
        self.nodos["600-450"] = ["600-400", "650-450", "600-500"]
        self.nodos["650-450"] = ["600-450", "650-500", "700-450"]
        self.nodos["700-450"] = ["650-450", "700-400", "750-450", "700-500"]
        self.nodos["750-450"] = ["700-450", "750-500", "800-450"]
        self.nodos["800-450"] = ["750-450", "800-400", "800-500"]
        self.nodos["50-500"] = ["50-450", "100-500", "50-600"]
        self.nodos["100-500"] = ["50-500", "200-500", "100-450", "100-550"]
        self.nodos["200-500"] = ["100-500", "150-450", "200-400", "200-550", "300-500"]
        self.nodos["300-500"] = ["200-500", "200-400", "300-400", "400-400", "400-500", "400-600", "300-600", "200-600"]
        self.nodos["400-500"] = ["300-500", "400-450", "400-600"]
        self.nodos["450-500"] = ["450-450", "500-450", "450-550"]
        self.nodos["500-500"] = ["500-450", "550-450", "550-500", "550-550", "500-550"]
        self.nodos["550-500"] = ["500-500", "550-450", "600-500", "550-550"]
        self.nodos["600-500"] = ["550-500", "600-450", "650-500", "600-600"]
        self.nodos["650-500"] = ["600-500", "650-450", "700-500", "650-550"]
        self.nodos["700-500"] = ["650-500", "700-450", "750-500"]
        self.nodos["750-500"] = ["700-500", "750-450", "800-500", "750-550"]
        self.nodos["800-500"] = ["750-500", "800-450", "800-600"]
        self.nodos["100-550"] = ["100-500", "200-550", "100-600"]
        self.nodos["200-550"] = ["100-550", "200-600", "200-500"]
        self.nodos["450-550"] = ["450-500", "500-550"]
        self.nodos["500-550"] = ["450-550", "500-500", "550-550", "500-600"]
        self.nodos["550-550"] = ["500-550", "550-500", "600-600", "500-500"]
        self.nodos["650-550"] = ["650-500", "750-550", "650-600"]
        self.nodos["750-550"] = ["650-550", "750-500", "750-600"]
        self.nodos["0-600"] = ["50-600", "0-400", "0-650"]
        self.nodos["50-600"] = ["0-600", "50-500", "100-600"]
        self.nodos["100-600"] = ["50-600", "100-550", "200-600", "100-650"]
        self.nodos["200-600"] = ["100-600", "200-550", "300-500", "300-600", "250-650", "200-650"]
        self.nodos["300-600"] = ["200-600", "300-500", "400-600", "250-650", "350-650"]
        self.nodos["400-600"] = ["300-600", "450-600", "400-500", "400-650"]
        self.nodos["450-600"] = ["400-600", "500-600", "450-650"]
        self.nodos["500-600"] = ["450-600", "550-600", "500-650", "500-550"]
        self.nodos["550-600"] = ["500-600", "600-600", "550-650"]
        self.nodos["600-600"] = ["550-600", "550-550", "600-500", "650-600", "600-650"]
        self.nodos["650-600"] = ["600-600", "650-550", "700-600"]
        self.nodos["700-600"] = ["650-600", "750-600", "650-650", "750-650"]
        self.nodos["750-600"] = ["700-600", "800-600", "750-550"]
        self.nodos["800-600"] = ["750-600", "800-500", "800-650"]
        self.nodos["0-650"] = ["50-650", "0-600", "0-800"]
        self.nodos["50-650"] = ["0-650", "50-700", "100-650"]
        self.nodos["100-650"] = ["50-650", "100-600", "200-650", "100-700", "150-725"]
        self.nodos["200-650"] = ["100-650", "200-600", "200-700"]
        self.nodos["250-650"] = ["200-600", "300-600", "300-700", "200-700"]
        self.nodos["350-650"] = ["300-600", "400-600", "300-700", "400-700"]
        self.nodos["400-650"] = ["400-600", "450-650", "400-700"]
        self.nodos["450-650"] = ["400-650", "450-600", "500-650", "450-700"]
        self.nodos["500-650"] = ["450-650", "550-650", "500-600", "500-700"]
        self.nodos["550-650"] = ["500-650", "600-650", "550-600", "550-700"]
        self.nodos["600-650"] = ["550-650", "600-600", "650-650", "600-700"]
        self.nodos["650-650"] = ["600-650", "750-650", "700-600", "700-700", "600-700"]
        self.nodos["750-650"] = ["650-650", "700-600", "800-650", "800-700", "700-700"]
        self.nodos["800-650"] = ["750-650", "800-600", "800-700"]
        self.nodos["50-700"] = ["100-700", "50-650", "50-750"]
        self.nodos["100-700"] = ["50-700", "100-650", "100-750"]
        self.nodos["200-700"] = ["200-650", "250-650", "250-750", "200-800"]
        self.nodos["300-700"] = ["250-650", "350-650", "250-750", "350-750"]
        self.nodos["400-700"] = ["350-650", "350-750", "400-650", "450-700", "400-750"]
        self.nodos["450-700"] = ["400-700", "500-700", "450-650", "450-750"]
        self.nodos["500-700"] = ["450-700", "550-700", "500-650", "500-750"]
        self.nodos["550-700"] = ["500-700", "600-700", "550-650", "550-750"]
        self.nodos["600-700"] = ["600-650", "550-700", "650-650", "650-750", "600-750"]
        self.nodos["700-700"] = ["650-650", "750-650", "650-750", "750-750"]
        self.nodos["800-700"] = ["750-650", "800-650", "800-750", "750-750"]
        self.nodos["150-725"] = ["100-650", "200-650", "100-800", "200-800"]
        self.nodos["50-750"] = ["50-700", "100-750", "50-800"]
        self.nodos["100-750"] = ["50-750", "100-700", "100-800"]
        self.nodos["250-750"] = ["200-700", "300-700", "200-800", "300-800"]
        self.nodos["350-750"] = ["300-700", "400-700", "300-800", "400-800"]
        self.nodos["400-750"] = ["400-700", "450-750", "400-800"]
        self.nodos["450-750"] = ["400-750", "450-700", "500-750", "450-800"]
        self.nodos["500-750"] = ["450-750", "550-750", "500-700", "500-800"]
        self.nodos["550-750"] = ["500-750", "600-750", "550-700", "550-800"]
        self.nodos["600-750"] = ["550-750", "650-750", "600-700", "600-800"]
        self.nodos["650-750"] = ["600-750", "600-700", "700-700", "750-750", "700-800"]
        self.nodos["750-750"] = ["650-750", "700-700", "800-700", "800-750", "700-800"]
        self.nodos["800-750"] = ["750-750", "800-700", "800-800"]
        self.nodos["0-800"] = ["0-650", "50-800"]
        self.nodos["50-800"] = ["0-800", "50-750", "100-800"]
        self.nodos["100-800"] = ["50-800", "100-750", "150-725", "200-800"]
        self.nodos["200-800"] = ["100-800", "200-700", "250-750", "300-800"]
        self.nodos["300-800"] = ["200-800", "250-750", "350-750", "400-800"]
        self.nodos["400-800"] = ["300-800", "450-800", "400-750", "350-750"]
        self.nodos["450-800"] = ["400-800", "500-800", "450-750"]
        self.nodos["500-800"] = ["450-800", "550-800", "500-750"]
        self.nodos["550-800"] = ["500-800", "600-800", "550-750"]
        self.nodos["600-800"] = ["550-800", "700-800", "600-750"]
        self.nodos["700-800"] = ["600-800", "650-750", "750-750", "800-800"]
        self.nodos["800-800"] = ["700-800", "800-750"]


def heuristica(a, b):
    x1, y1 = map(float, a.split('-'))
    x2, y2 = map(float, b.split('-'))

    return sqrt((x1 - x2) ** 2 + (y1 - y2) ** 2)


def a_estrela(grafo, inicio, fim):
    heap = [(0, inicio)]
    custos = {inicio: 0}
    visitados = set()
    caminho = {inicio: None}

    while heap:
        (custo_atual, atual) = heapq.heappop(heap)

        if atual in visitados:
            continue

        visitados.add(atual)

        if atual == fim:
            caminho_reverso = []
            while atual is not None:
                caminho_reverso.append(atual)
                atual = caminho[atual]
            return custo_atual, list(reversed(caminho_reverso))

        for proximo in grafo[atual]:
            novo_custo = custo_atual + heuristica(atual, proximo)

            if proximo not in custos or novo_custo < custos[proximo]:
                custos[proximo] = novo_custo
                caminho[proximo] = atual
                prioridade = novo_custo + heuristica(proximo, fim)
                heapq.heappush(heap, (round(prioridade, 0), proximo))

    return None, 0

def bfs(grafo, inicio, fim):
    fila = deque([inicio])
    visitados = set()
    caminho = {inicio: None}

    while fila:
        atual = fila.popleft()

        if atual in visitados:
            continue

        visitados.add(atual)

        if atual == fim:
            caminho_reverso = []
            while atual is not None:
                caminho_reverso.append(atual)
                atual = caminho[atual]
            return len(caminho_reverso) - 1, list(reversed(caminho_reverso))

        for proximo in grafo[atual]:
            if proximo not in visitados:
                fila.append(proximo)
                caminho[proximo] = atual

    return None, 0

def dfs(grafo, inicio, fim):
    pilha = [(inicio, [inicio])]
    visitados = set()

    while pilha:
        atual, caminho = pilha.pop()

        if atual in visitados:
            continue

        visitados.add(atual)

        if atual == fim:
            return len(caminho) - 1, caminho

        for proximo in grafo[atual]:
            if proximo not in visitados:
                pilha.append((proximo, caminho + [proximo]))

    return None, 0



